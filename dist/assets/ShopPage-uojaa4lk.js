import{d as R,r as I,t as T,w as V,o as F,a as O,b as d,c as v,e as z,v as A,f as s,g as $,h as g,n as j,i as _,j as p,p as Q,k as U,u as W,l as X,m as E,F as H,q as M,s as N,x as B,y as G,z as J,A as K,B as Z,C as Y,_ as ss,D as P}from"./index-jvsXQBcr.js";const ls="data:image/svg+xml,%3csvg%20version='1.2'%20baseProfile='tiny-ps'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2020%2020'%20width='20'%20height='20'%3e%3ctitle%3ex-dark-svg%3c/title%3e%3cstyle%3e%20tspan%20{%20white-space:pre%20}%20.shp0%20{%20fill:%20none;stroke:%20%23000000;stroke-linecap:round;stroke-linejoin:round;stroke-width:%201.667%20}%20%3c/style%3e%3cpath%20id='Layer'%20class='shp0'%20d='M15%205L5%2015'%20/%3e%3cpath%20id='Layer'%20class='shp0'%20d='M5%205L15%2015'%20/%3e%3c/svg%3e";function es(l,c){const t=l.getBoundingClientRect();if(!c)return t.top>=0&&t.bottom<=window.innerHeight;const e=c.getBoundingClientRect();return t.top>=e.top&&t.bottom<=e.bottom}async function is(l){return await j(),l.value instanceof HTMLElement?l.value:l.value?document.querySelector(l.value):null}function D(l){let c=`0px 0px ${l.distance}px 0px`;l.top&&(c=`${l.distance}px 0px 0px 0px`);const t=new IntersectionObserver(e=>{e[0].isIntersecting&&(l.firstload&&l.emit(),l.firstload=!0)},{root:l.parentEl,rootMargin:c});return t.observe(l.infiniteLoading.value),t}const q=(l,c)=>{const t=l.__vccOpts||l;for(const[e,f]of c)t[e]=f;return t},ts={},os=l=>(Q("data-v-d3e37633"),l=l(),U(),l),as={class:"container"},cs=os(()=>s("div",{class:"spinner"},null,-1)),rs=[cs];function ns(l,c){return d(),v("div",as,rs)}const ds=q(ts,[["render",ns],["__scopeId","data-v-d3e37633"]]),vs={class:"state-error"},us=R({__name:"InfiniteLoading",props:{top:{type:Boolean,default:!1},target:{},distance:{default:0},identifier:{},firstload:{type:Boolean,default:!0},slots:{}},emits:["infinite"],setup(l,{emit:c}){const t=l;let e=null,f=0;const m=I(null),r=I(""),{top:y,firstload:b,distance:x}=t,{identifier:w,target:k}=T(t),a={infiniteLoading:m,top:y,firstload:b,distance:x,parentEl:null,emit(){f=(a.parentEl||document.documentElement).scrollHeight,L.loading(),c("infinite",L)}},L={loading(){r.value="loading"},async loaded(){r.value="loaded";const u=a.parentEl||document.documentElement;await j(),y&&(u.scrollTop=u.scrollHeight-f),es(m.value,a.parentEl)&&a.emit()},complete(){r.value="complete",e==null||e.disconnect()},error(){r.value="error"}};return V(w,()=>{e==null||e.disconnect(),e=D(a)}),F(async()=>{a.parentEl=await is(k),e=D(a)}),O(()=>{e==null||e.disconnect()}),(u,S)=>(d(),v("div",{ref_key:"infiniteLoading",ref:m,style:{"min-height":"1px"}},[z(s("div",null,[$(u.$slots,"spinner",{},()=>[_(ds)],!0)],512),[[A,r.value=="loading"]]),r.value=="complete"?$(u.$slots,"complete",{key:0},()=>{var o;return[s("span",null,p(((o=u.slots)==null?void 0:o.complete)||"No more results!"),1)]},!0):g("",!0),r.value=="error"?$(u.$slots,"error",{key:1,retry:a.emit},()=>{var o;return[s("span",vs,[s("span",null,p(((o=u.slots)==null?void 0:o.error)||"Oops something went wrong!"),1),s("button",{class:"retry",onClick:S[0]||(S[0]=(...h)=>a.emit&&a.emit(...h))},"retry")])]},!0):g("",!0)],512))}}),ps=q(us,[["__scopeId","data-v-a7077831"]]),fs={key:0,class:"loader"},hs=s("span",null,null,-1),ms=s("span",null,null,-1),_s=[hs,ms],gs={class:"back-links"},ys=s("i",{class:"iconly-Arrow-Left icli"},null,-1),bs={class:"content"},xs=B('<div class="header-option"><ul><li><a href="wishlist.html"><i class="iconly-Heart icli"></i></a></li><li><a href="cart.html"><i class="iconly-Buy icli"></i></a></li></ul></div>',1),ws=B('<div class="search-panel top-space xl-space px-15"><div class="search-bar"><input class="form-control form-theme" placeholder="Search"><i class="iconly-Search icli search-icon"></i><i class="iconly-Camera icli camera-icon"></i></div><div class="filter-btn" data-bs-toggle="modal" data-bs-target="#filterModal"><i class="iconly-Filter icli"></i></div></div>',1),ks={class:"px-15 lg-t-space",id:"products-section"},Ls={class:"row gy-3 gx-3"},Ss={class:"product-box ratio_square"},Cs={class:"img-part"},Es=["src"],Is={class:"wishlist-btn"},Bs=["onClick"],$s=B('<i class="iconly-Heart icli"></i><i class="iconly-Heart icbo"></i><div class="effect-group"><span class="effect"></span><span class="effect"></span><span class="effect"></span><span class="effect"></span><span class="effect"></span></div>',3),Hs=[$s],Ms={class:"product-content"},Ns={class:"ratings"},Ps=s("i",{class:"iconly-Star icbo"},null,-1),Ds=[Ps],js={class:"price"},qs={key:0},Rs={key:0},Ts={key:1},Vs={key:1},Fs=s("div",{slot:"no-more"},"No more items",-1),Os=s("div",{slot:"no-results"},"No results",-1),zs=B('<div class="modal filter-modal" id="filterModal" tabindex="-1" aria-hidden="true"><div class="modal-dialog modal-fullscreen"><div class="modal-content"><div class="modal-header"><h2>Filters</h2><a href="javascript:void(0)" data-bs-dismiss="modal"><img src="'+ls+'" class="img-fluid" alt=""></a></div><div class="modal-body"><div class="filter-box"><h2 class="filter-title">Sort By:</h2><div class="filter-content"><select class="form-select form-control form-theme" aria-label="Default select example"><option selected>Recommended</option><option value="1">Popularity</option><option value="2">What&#39;s New</option><option value="3">Price: High to Low</option><option value="4">Price: Low to High</option><option value="5">Customer rating</option></select></div></div><div class="filter-box"><h2 class="filter-title">Brand:</h2><div class="filter-content"><ul class="row filter-row g-3"><li class="col-6"><div class="filter-col">Here &amp; Now</div></li><li class="col-6"><div class="filter-col">Zara</div></li><li class="col-6 active"><div class="filter-col">Mast &amp; harbour</div></li><li class="col-6"><div class="filter-col">Tokyo talkies</div></li><li class="col-6"><div class="filter-col">Vogue</div></li><li class="col-6"><div class="filter-col">gucci</div></li></ul></div></div><div class="filter-box"><h2 class="filter-title">Size:</h2><div class="filter-content"><ul class="row filter-row g-3"><li class="col-4"><div class="filter-col">small</div></li><li class="col-4"><div class="filter-col">Medium</div></li><li class="col-4"><div class="filter-col">large</div></li><li class="col-4"><div class="filter-col">XL</div></li><li class="col-4"><div class="filter-col">2XL</div></li></ul></div></div><div class="filter-box"><h2 class="filter-title">Price:</h2><div class="filter-content"><div class="range-slider pricing-slider"><input type="text" class="js-range-slider" value=""></div></div></div><div class="filter-box"><h2 class="filter-title">Occasion:</h2><div class="filter-content"><ul class="row filter-row g-3"><li class="col-6"><div class="filter-col">Casual</div></li><li class="col-6"><div class="filter-col">sports</div></li><li class="col-6"><div class="filter-col">beach wear</div></li><li class="col-6"><div class="filter-col">lounge wear</div></li><li class="col-6"><div class="filter-col">formal</div></li><li class="col-6"><div class="filter-col">party</div></li></ul></div></div><div class="filter-box"><h2 class="filter-title">Colors:</h2><div class="filter-content"><ul class="filter-color"><li><div class="color-box light-purple"></div></li><li class="active"><div class="color-box light-grey"></div></li><li><div class="color-box blue-purple"></div></li><li><div class="color-box light-orange"></div></li><li><div class="color-box dark-pink"></div></li><li><div class="color-box green-blue"></div></li><li><div class="color-box green"></div></li><li><div class="color-box blue"></div></li><li><div class="color-box yellow"></div></li><li><div class="color-box light-red"></div></li><li><div class="color-box light-purple2"></div></li></ul></div></div></div><div class="modal-footer"><a href="javascript:void(0)" class="reset-link" data-bs-dismiss="modal">RESET</a><a href="javascript:void(0)" class="btn btn-solid" data-bs-dismiss="modal">apply filters</a></div></div></div></div>',1),Qs={__name:"ShopPage",setup(l){const c=G(),{$axios:t}=c.appContext.config.globalProperties,e=W(),f=I([]),m=I(!1);let r=1,y=e.query,{category:b,subcategory:x,childcategory:w,vendor:k,brand:a}=y;const L=async o=>{try{const h=b?"category":x?"subcategory":w?"childcategory":k?"vendor":a?"brand":"",n=b||x||w||k||a||"",i=await t.get(`products?${h}=${n}&page=${r}`),C=await i.data.products.data;r>i.data.products.last_page?o.complete():(f.value.push(...C),o.loaded(),m.value=!0),r++}catch{o.error()}},u=X(),S=async o=>{const h=o;console.log(h);try{const n=await t.post("wishlist/add-product",{id:h,user_id:u.id});n.data.status==="success"?P.success(n.data.message):P.error(n.data.message)}catch(n){console.error("Error:",n)}};return(o,h)=>{const n=J("router-link");return d(),v(H,null,[m.value?g("",!0):(d(),v("div",fs,_s)),s("header",null,[s("div",gs,[_(n,{to:{name:"home"}},{default:E(()=>[ys,s("div",bs,[s("h2",null,p(o.$route.query.category),1),s("h6",null,p(f.value.length)+" Products",1)])]),_:1})]),xs]),ws,s("section",ks,[s("div",Ls,[(d(!0),v(H,null,M(f.value,i=>(d(),v("div",{key:i.id,class:"col-md-4 col-6"},[s("div",Ss,[s("div",Cs,[_(n,{to:{name:"product-detail",params:{product:i.slug}}},{default:E(()=>[s("img",{src:o.$uploads+i.thumb_image,style:{height:"200px",width:"200px"},alt:"",class:"img-fluid bg-img"},null,8,Es)]),_:2},1032,["to"]),s("div",Is,[s("button",{class:"btn",onClick:K(C=>S(i.id),["prevent"])},Hs,8,Bs)])]),s("div",Ms,[s("ul",Ns,[(d(),v(H,null,M(5,C=>s("li",{key:C},Ds)),64))]),_(n,{to:{name:"product-detail",params:{product:i.slug}}},{default:E(()=>[s("h4",null,p(i.name),1)]),_:2},1032,["to"]),s("div",js,[i.offer_price?(d(),v("h4",qs,[Z(p(i.offer_price)+" IQD ",1),i.offer_price?(d(),v("del",Rs,p(i.price)+" IQD",1)):g("",!0),i.offer_price?(d(),v("span",Ts,"%"+p(N(Y)(i.price,i.offer_price)),1)):g("",!0)])):(d(),v("h4",Vs,p(i.price)+" IQD",1))])])])]))),128))]),_(N(ps),{onInfinite:L,spinner:"spiral",direction:"bottom","force-use-infinite-wrapper":""},{default:E(()=>[Fs,Os]),_:1})]),zs,_(ss)],64)}}};export{Qs as default};
