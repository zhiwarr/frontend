import{O as U,r as u,G as F,w as I,c,f as t,i as x,m as D,F as p,q as A,s as g,A as S,e as K,M as W,B as i,j as o,h as w,y as X,z as Y,b as a,D as k}from"./index-jvsXQBcr.js";import{u as Z}from"./cart-jF4wDxA0.js";const M="/frontend/assets/scooter-Jryk9jhH.png",tt={class:"back-links"},st=t("i",{class:"iconly-Arrow-Left icli mt-1 mx-2"},null,-1),et=t("div",{class:"content"},[t("h2",null,"Shopping Cart"),t("h6",null,"Step 1 of 2")],-1),ot=[st,et],lt={class:"header-option"},nt=t("i",{class:"iconly-Heart icli"},null,-1),ct={class:"cart-section pt-0 top-space xl-space"},it={class:"cart-box px-15"},at=["href"],ut=["src","alt"],dt={class:"cart-content"},rt=["href"],_t={class:"content-color"},ht={class:"price"},pt={class:"select-size-sec"},vt={href:"javascript:void(0)"},mt={class:"cart-option"},ft=["onClick"],bt=t("i",{class:"iconly-Delete icli"},null,-1),yt=t("div",{class:"divider"},null,-1),gt={class:"px-15 pt-0"},kt=t("h2",{class:"title"},"Coupons:",-1),Ct={class:"coupon-section flex items-center"},xt=t("i",{class:"iconly-Discount icli icon-discount"},null,-1),Dt=t("button",{type:"submit",class:"btn"},[t("i",{class:"iconly-Arrow-Right-2 icli icon-right mb-5"})],-1),At=t("div",{class:"divider"},null,-1),St={id:"order-details",class:"px-15 pt-0"},wt=t("h2",{class:"title"},"Order Details:",-1),$t={class:"order-details"},Ot={key:0},jt={class:"total-amount"},Tt=t("div",{class:"divider"},null,-1),Ft={id:"order-details",class:"px-15 pt-0"},Nt=t("h2",{class:"title"},"Order Details:",-1),Vt={class:"order-details"},qt={key:0},Qt={class:"total-amount"},Rt=t("div",{class:"divider"},null,-1),zt={class:"top-space px-15 pt-0"},Bt={class:"delivery-option-section"},Et={class:"check-box"},Pt={class:"form-check d-flex ps-0"},Lt=["id","checked","onChange"],Ht=["for"],Gt={class:"name"},Jt={class:"addess"},Ut=t("h6",{class:"label"},"Location",-1),It={class:"buttons mt-3 l-15"},Kt=["onClick"],Wt=t("div",{class:"divider"},null,-1),Xt={class:"service-wrapper px-15 pt-0"},Yt={class:"row"},Zt={class:"service-wrap"},Mt=t("div",{class:"icon-box"},[t("img",{src:M,class:"img-fluid",alt:""})],-1),ts=t("br",null,null,-1),ss={key:0},es=["value","onChange","checked"],os={key:1},ls=["onChange","value","checked"],ns=t("div",{class:"divider"},null,-1),cs=t("section",{class:"panel-space"},null,-1),is={class:"cart-bottom"},as={class:"left-content"},us=t("br",null,null,-1),vs={__name:"CartPage",setup(ds){const N=U(),V=X(),{$axios:v,$uploads:q}=V.appContext.config.globalProperties,n=Z(),Q=n.cartItems,m=u(""),r=u({discount:0,cart_total:0,coupon_name:"",coupon_code:""}),R=e=>{n.removeFromCart(e),k.success("Item removed from cart successfully")},z=()=>{n.applyCoupon(m.value)},B=F(()=>n.subtotal),C=F(()=>n.totalAmount);n.calculateSubtotal(),n.calculateTotalAmount();const f=e=>`${e.toFixed(1)} IQD`,E=()=>{const e=r.value.type,l=r.value.discount;let d=0;return e==="percent"?d=n.subtotal*l/100:e==="amount"&&(d=l),r.value.discount=d,d};I(m,()=>{E()});const $=u([]);(async()=>{await v.get("checkout").then(e=>{$.value=e.data.shippingMethods})})();const O=u([]),b=u(!0),j=async()=>{try{const e=await v.get("address");O.value=e.data.data,b.value=!1}catch(e){console.error("Error fetching address data:",e),b.value=!1}},P=async e=>{try{const l=await v.delete("address/"+e);j(),b.value=!1,console.log(l)}catch(l){console.error("Error deleting address data:",l),b.value=!1}};j();const _=u(null),y=u(null),L=u({}),H=u({}),G=e=>{L.value=e,y.value=e.id,n.selectedAddressObject=e},T=e=>{H.value=e,_.value=e.id,n.selectedShippingAreaObject=e},J=()=>{if(!_.value)k.error("Shipping method is required");else if(!y.value)k.error("Shipping address is required");else{const e={shipping_method_id:_.value,shipping_address_id:y.value};v.post("checkout/form-submit",e).then(l=>{l.data.status==="success"&&(k.success("Order placed successfully"),N.push({name:"payment"}))}).catch(l=>{console.error("Error submitting checkout form:",l)})}};return(e,l)=>{const d=Y("router-link");return a(),c(p,null,[t("header",null,[t("div",tt,[t("button",{onClick:l[0]||(l[0]=s=>e.$router.go(-1)),class:"btn d-flex"},ot)]),t("div",lt,[t("ul",null,[t("li",null,[x(d,{to:{name:"wishlist"}},{default:D(()=>[nt]),_:1})])])])]),t("section",ct,[(a(!0),c(p,null,A(g(Q),(s,h)=>(a(),c(p,{key:h},[t("div",it,[t("a",{href:"product.html?id="+s.id,class:"cart-img"},[t("img",{src:g(q)+s.thumb_image,class:"img-fluid",alt:s.product_slug},null,8,ut)],8,at),t("div",dt,[t("a",{href:"product.html?id="+s.id},[t("h4",null,o(s.product_slug),1)],8,rt),t("h5",_t,o(s.brand),1),t("div",ht,[t("h4",null,o(s.unit_price)+" IQD",1)]),t("div",pt,[t("a",vt,[t("h6",null,"Qty: "+o(s.qty),1)])]),t("div",mt,[t("h5",{onClick:_s=>R(s)},[bt,i(" Remove ")],8,ft)])])]),yt],64))),128))]),t("section",gt,[t("form",{onSubmit:S(z,["prevent"]),method:"post"},[kt,t("div",Ct,[xt,K(t("input",{class:"form-control form-theme py-3","onUpdate:modelValue":l[1]||(l[1]=s=>m.value=s),placeholder:"Apply Coupons"},null,512),[[W,m.value]]),Dt])],32)]),At,t("section",St,[wt,t("div",$t,[t("ul",null,[t("li",null,[t("h4",null,[i("Subtotal "),t("span",null,o(g(n).subtotal),1)])]),r.value.discount>0?(a(),c("li",Ot,[t("h4",null,[i("Coupon Discount "),t("span",null,o(r.value.discount),1)])])):w("",!0)]),t("div",jt,[t("h4",null,[i("Total Amount "),t("span",null,o(g(n).totalAmount),1)])])])]),Tt,t("section",Ft,[Nt,t("div",Vt,[t("ul",null,[t("li",null,[t("h4",null,[i("Subtotal "),t("span",null,o(f(B.value)),1)])]),r.value.discount>0?(a(),c("li",qt,[t("h4",null,[i("Coupon Discount "),t("span",null,o(f(r.value.discount)),1)])])):w("",!0)]),t("div",Qt,[t("h4",null,[i("Total Amount "),t("span",null,o(f(C.value)),1)])])])]),Rt,t("section",zt,[t("div",Bt,[t("ul",null,[(a(!0),c(p,null,A(O.value,s=>(a(),c("li",{key:s.id},[t("div",Et,[t("div",Pt,[t("input",{class:"radio_animated",type:"radio",name:"flexRadioDefault",id:s.id,checked:y.value===s.id,onChange:h=>G(s)},null,40,Lt),t("label",{class:"form-check-label",for:s.id},null,8,Ht),t("div",null,[t("h4",Gt,o(s.name),1),t("div",Jt,[t("h4",null,o(s.country),1),t("h4",null,o(s.state),1),t("h4",null,o(s.city),1),t("h4",null,o("("+s.zip+")"+s.address),1)]),t("h4",null,"Phone No: "+o(s.phone),1),Ut])])]),t("div",It,[t("button",{onClick:S(h=>P(s.id),["prevent"]),class:"btn"},"Remove",8,Kt),x(d,{class:"btn mx-3 mt-1",to:{name:"edit-address",params:{id:s.id}}},{default:D(()=>[i("edit")]),_:2},1032,["to"])])]))),128))]),x(d,{to:{name:"new-address"},class:"btn btn-outline text-capitalize w-100 mt-3"},{default:D(()=>[i("add New address")]),_:1})])]),Wt,t("section",Xt,[t("div",Yt,[(a(!0),c(p,null,A($.value,s=>(a(),c("div",{class:"col-4",key:s.id},[t("div",Zt,[Mt,t("span",null,o(s.name),1),ts,s.type==="min_cost"&&C.value>=s.min_cost?(a(),c("label",ss,[t("input",{type:"radio",name:"shippingMethod",value:s.id,onChange:h=>T(s),checked:_.value===s.id},null,40,es),t("span",null,"Cost: ("+o(s.cost)+"IQD)",1)])):s.type==="flat_cost"?(a(),c("label",os,[t("input",{type:"radio",name:"shippingMethod",onChange:h=>T(s),value:s.id,checked:_.value===s.id},null,40,ls),t("span",null,"Cost: ("+o(s.cost)+" IQD)",1)])):w("",!0)])]))),128))])]),ns,cs,t("div",is,[t("div",null,[t("div",as,[t("h4",null,[i("Total Amount "),t("span",null,[us,i(o(f(C.value)),1)])])]),t("button",{onClick:S(J,["prevent"]),class:"btn btn-solid"},"Place Order")])])],64)}}};export{vs as default};
